<div id="ixc-sec-dns-rule-view" class="ixc-menu-content" style="display: none;">
    <form style="width: 50%;margin: auto;min-width: 400px;" class="ixc-conf-form"
          enctype="application/x-www-form-urlencoded" method="post" action="${self.url_prefix}/sec-dns-rule" id="ixc-sec-dns-rule-form">
        <h4>DNS拦截规则</h4>
        <div class="ixc-empty"></div>
        <div class="ixc-empty"></div>
        <div class="form-group">
            <textarea cols="100%" rows="40%" name="text" style="letter-spacing: 0.1em;">${self.V['rules']}</textarea>
        </div>
        <div class="form-group row">
            <div class="col-sm-12">
                <input type="hidden" value="rules_modify" name="action" />
                <button type="submit" class="btn btn-primary float-lg-right">确定</button>
            </div>
        </div>
    </form>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $("#ixc-sec-dns-rule-modify").click(function () {
            let form_data = $("#ixc-sec-dns-rule-form").serialize();

            $.post("${self.url_prefix}/sec-dns-rule", form_data, function (rs) {
                let is_error = rs.is_error;
                if (is_error) {
                    alert(rs.message);
                } else {
                    window.location.reload();
                }
            })
        });
    });
</script>