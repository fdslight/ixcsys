${self.inherit("base.html")}
<%block name="header">
    <link rel="stylesheet" href="${self.staticfile_prefix}/css/homepage.css"/>
</%block>

<%block name="title">${self.LA('homepage')}</%block>

<%block name="content">
    <div class="container-fluid" style="min-width: 1280px;padding: 0;">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="#">Navbar</a>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            </div>
            <form class="form-inline">
                <button class="btn btn-outline-success my-2 my-sm-0" type="button">重启系统</button>
                <button class="btn btn-outline-success my-2 my-sm-0" type="button">注销</button>
            </form>
        </nav>
        <div class="row ixc-left" style="width: 90%;margin: auto;">
            <div class="col-2">
                <ul class="list-group">
                    <li class="list-group-item ixc-left-nav-title">
                        <div class="ixc-left-nav-title">我的应用</div>
                    </li>
                    <li class="list-group-item ixc-left-menu" id="ixc-app-store">
                        <a href="${self.url_prefix}/system_info">应用商店</a>
                    </li>
                    <li class="list-group-item ixc-left-menu" id="ixc-app-file-manager">
                        <a href="#">文件管理器</a>
                    </li>
                </ul>
                <div class="ixc-empty"></div>
                <ul class="list-group">
                    <li class="list-group-item ixc-left-nav-title">
                        <div class="ixc-left-nav-title">网络设置</div>
                    </li>
                    <li class="list-group-item ixc-left-menu" id="ixc-fast-start">
                        <a href="#">快速设置向导</a>
                    </li>
                    <li class="list-group-item ixc-left-menu" id="ixc-wan-internet">
                        <a href="${self.url_prefix}/?show=ixc-wan-internet.ixc-pppoe-dial&path=${self.url_prefix}/wan">WAN
                            上网设置</a>
                    </li>
                    <li class="list-group-item ixc-left-menu" id="ixc-wan-port-map">
                        <a href="${self.url_prefix}/?show=ixc-wan-port-map&path=${self.url_prefix}/port_map">WAN
                            端口映射</a>
                    </li>
                    <li class="list-group-item ixc-left-menu" id="ixc-dhcp-server">
                        <a href="${self.url_prefix}/dhcp?r=ixc-dhcp-server">LAN DHCP服务器</a>
                    </li>
                    <li class="list-group-item ixc-left-menu" id="ixc-dns-server">
                        <a href="${self.url_prefix}/dns">LAN DNS服务器</a>
                    </li>
                    <li class="list-group-item ixc-left-menu" id="ixc-tftp-server">
                        <a href="${self.url_prefix}/?show=ixc-tftp-server&path=${self.url_prefix}/tftp">LAN TFTP服务器</a>
                    </li>
                </ul>
                <div class="ixc-empty"></div>
                <ul class="list-group">
                    <li class="list-group-item ixc-left-nav-title">
                        <div class="ixc-left-nav-title">高级管理</div>
                    </li>
                    <li class="list-group-item ixc-left-menu">
                        <a href="#">网络栈参数调整</a>
                    </li>
                </ul>
                <div class="ixc-empty"></div>
                <ul class="list-group">
                    <li class="list-group-item ixc-left-nav-title">
                        <div class="ixc-left-nav-title">系统管理</div>
                    </li>
                    <li class="list-group-item ixc-left-menu" id="ixc-system-console">
                        <a href="#">控制台</a>
                    </li>
                    <li class="list-group-item ixc-left-menu" id="ixc-system-network">
                        <a href="${self.url_prefix}/?show=ixc-system-network.ixc-system-network-wan&path=${self.url_prefix}/system_network">系统网络</a>
                    </li>
                    <li class="list-group-item ixc-left-menu" id="ixc-system-info">
                        <a href="${self.url_prefix}/?show=ixc-system-info&path=${self.url_prefix}/system_info">系统信息</a>
                    </li>
                    <li class="list-group-item ixc-left-menu" id="ixc-system-update">
                        <a href="#">软件更新</a>
                    </li>
                </ul>
            </div>
            <div class="col-10" style="padding: 0;">
                ## fast-start.html
                ## wan.html
                ## port-map.html
                ## dhcp-server.html
                ## dns-server.html
                ## tftp-server.html
                ## system-network.html
                ## system-info.html

                <div class="ixc-page-content"></div>
            </div>
        </div>
    </div>
    <div class="ixc-empty"></div>
    <script type="text/javascript">
        $(document).ready(function (e) {
            /** 显示菜单内容 **/
            function load_page() {
                /// 加载页面,实现加载选定的内容并激活对应的菜单颜色
                let url_params = new URLSearchParams(window.location.search);
                let show = url_params.get("show");
                let path = url_params.get("path");

                if (null === show || show === "") return;

                let array = show.split(".");
                if (null == path) return;
                path = path.replaceAll(" ", "");
                if (path === "") return;

                $.get(path, function (data) {
                    // 左边菜单ID+"-view"表示渲染的名称
                    for (let i = 0; i < array.length; i++) {
                        let selector = $("#" + array[i] + "-view");
                        if (i === array.length - 1) {
                            if (data["is_error"]) {
                                selector.html(data["message"]);
                            } else {
                                selector.view_render("V-", data["message"]);
                            }
                        }
                        $("#" + array[i]).addClass("active");
                        selector.css("display", "block");
                    }
                });
            }

            /** 根据左边不同的菜单显示不同的内容 **/
            $(".ixc-left-menu").click(function () {

                let id = $(this).attr("id");
                let href = $(this).children("a").attr("href");
                let text = '<iframe style="width: 100%;height: 100%;padding: 0;border: 0;"></iframe>';
                let page = $(".ixc-page-content");

                $(".ixc-left-menu").removeClass("active");
                $(this).addClass("active");

                page.css("display", "none");
                $(".ixc-menu-content").css("display", "none");

                if (id.indexOf("ixc-app") !== 0) {
                    window.location.href = href;
                    return true;
                }
                ;
                page.html(text);
                page.css("display", "block");
                return false;

            });

            /** 配置表单提交 **/
            $(".ixc-conf-form").submit(function () {
                let sub_content = $(this).serialize();
                return false;
            });

            load_page();
        });
    </script>
</%block>
<%block name="footer">
## footer.html
</%block>